<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Northfield V5 - NovaLife</title>

<!-- SUPABASE -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
/* ======== CSS IDENTIQUE Ã€ TON CODE ======== */
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Tahoma;background:linear-gradient(135deg,#0f172a,#1e293b);color:#e5e7eb;min-height:100vh}
header{background:rgba(2,6,23,.95);padding:20px;position:sticky;top:0;z-index:1000}
.nav-container{display:flex;justify-content:center;gap:40px}
header button{background:none;border:none;color:#94a3b8;font-size:16px;cursor:pointer;padding:10px 20px;border-radius:8px}
header button.active,header button:hover{color:#38bdf8;background:rgba(56,189,248,.15)}
main{max-width:1200px;margin:40px auto;padding:20px}
.hidden{display:none}
.card{background:rgba(2,6,23,.8);padding:20px;border-radius:12px;margin-top:10px;display:flex;justify-content:space-between}
.delete-btn{background:#dc2626;border:none;color:white;padding:8px 12px;border-radius:6px;cursor:pointer}
form{background:rgba(2,6,23,.7);padding:25px;border-radius:12px;margin:20px 0}
form input,form select,form textarea{width:100%;padding:12px;margin-bottom:15px;background:#020617;border:1px solid #38bdf8;color:white}
form button{background:#38bdf8;border:none;padding:12px;font-weight:bold;cursor:pointer}
</style>
</head>

<body>

<header>
  <div class="nav-container">
    <button class="active" onclick="showSection('accueil',this)">Accueil</button>
    <button onclick="showSection('entreprise',this)">Entreprise</button>
    <button onclick="showSection('staff',this)">Ã‰quipe Staff</button>
  </div>
</header>

<main>

<section id="accueil">
  <h1>ğŸ™ï¸ Northfield V5</h1>
  <p>Serveur RolePlay optimisÃ© et immersif.</p>
</section>

<section id="entreprise" class="hidden">
  <h1>ğŸ¢ Entreprises</h1>
  <button onclick="toggleEntrepriseForm()">+</button>

  <form id="entrepriseForm" class="hidden">
    <input id="entrepriseNom" placeholder="Nom entreprise">
    <input id="entreprisePrenomPDG" placeholder="PrÃ©nom PDG">
    <input id="entrepriseNomPDG" placeholder="Nom PDG">
    <input id="entrepriseIdTerrain" placeholder="ID Terrain">
    <input id="entrepriseDiscord" placeholder="Discord">
    <textarea id="entreprisePhraseAccroche" placeholder="Phrase d'accroche"></textarea>
    <button type="button" onclick="addEntreprise()">Ajouter</button>
  </form>

  <div id="entrepriseContainer"></div>
</section>

<section id="staff" class="hidden">
  <h1>ğŸ‘® Ã‰quipe Staff</h1>
  <button onclick="toggleStaffForm()">+</button>

  <form id="staffForm" class="hidden">
    <input id="staffPrenom" placeholder="PrÃ©nom">
    <input id="staffNom" placeholder="Nom">
    <select id="staffGrade">
      <option value="">Grade</option>
      <option>Fondateur</option>
      <option>Administrateur</option>
      <option>ModÃ©rateur</option>
    </select>
    <input id="staffJour" placeholder="Jour">
    <input id="staffMois" placeholder="Mois">
    <input id="staffAnnee" placeholder="AnnÃ©e">
    <button type="button" onclick="addStaff()">Ajouter</button>
  </form>

  <div id="staffContainer"></div>
</section>

</main>

<script>
/* ===================== SUPABASE ===================== */
const supabaseUrl = "https://owdolvoyequfcimwelgk.supabase.co";
const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im93ZG9sdm95ZXF1ZmNpbXdlbGdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY5Mjg5NjUsImV4cCI6MjA4MjUwNDk2NX0.4JPgzL0MnE0YM9sCvxY9Tz7TwxrWfpSRlNBZynQf6Ko";
const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

/* ===================== NAV ===================== */
function showSection(id,btn){
 document.querySelectorAll("section").forEach(s=>s.classList.add("hidden"));
 document.getElementById(id).classList.remove("hidden");
 document.querySelectorAll("header button").forEach(b=>b.classList.remove("active"));
 btn.classList.add("active");
}

/* ===================== ENTREPRISE ===================== */
function toggleEntrepriseForm(){
 document.getElementById("entrepriseForm").classList.toggle("hidden");
}

async function addEntreprise(){
 const data={
  nom:entrepriseNom.value,
  prenom_pdg:entreprisePrenomPDG.value,
  nom_pdg:entrepriseNomPDG.value,
  id_terrain:entrepriseIdTerrain.value,
  discord:entrepriseDiscord.value,
  phrase_accroche:entreprisePhraseAccroche.value
 };
 await supabase.from("entreprises").insert([data]);
 toggleEntrepriseForm();
 loadEntreprises();
}

async function loadEntreprises(){
 const {data}=await supabase.from("entreprises").select("*");
 entrepriseContainer.innerHTML="";
 data.forEach(e=>{
  entrepriseContainer.innerHTML+=`
   <div class="card">
    <div>${e.nom} â€“ PDG ${e.prenom_pdg} ${e.nom_pdg}</div>
    <button class="delete-btn" onclick="deleteEntreprise('${e.id}')">ğŸ—‘</button>
   </div>`;
 });
}

async function deleteEntreprise(id){
 await supabase.from("entreprises").delete().eq("id",id);
 loadEntreprises();
}

/* ===================== STAFF ===================== */
function toggleStaffForm(){
 document.getElementById("staffForm").classList.toggle("hidden");
}

async function addStaff(){
 const date=`${staffAnnee.value}-${staffMois.value}-${staffJour.value}`;
 await supabase.from("staff").insert([{
  prenom:staffPrenom.value,
  nom:staffNom.value,
  grade:staffGrade.value,
  date_arrivee:date
 }]);
 toggleStaffForm();
 loadStaff();
}

async function loadStaff(){
 const {data}=await supabase.from("staff").select("*");
 staffContainer.innerHTML="";
 data.forEach(s=>{
  staffContainer.innerHTML+=`
   <div class="card">
    <div>${s.prenom} ${s.nom} â€“ ${s.grade}</div>
    <button class="delete-btn" onclick="deleteStaff('${s.id}')">ğŸ—‘</button>
   </div>`;
 });
}

async function deleteStaff(id){
 await supabase.from("staff").delete().eq("id",id);
 loadStaff();
}

/* ===================== INIT ===================== */
loadEntreprises();
loadStaff();
</script>

</body>
</html>
